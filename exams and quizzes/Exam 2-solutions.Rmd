---
title: "Exam 2"
author: "Your name"
date: "2024-11-11"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
```

# Review exercises 

```{r preamble}
library(tidyverse)
```
### Codebook:
The Boston Housing Dataset

The Boston Housing Dataset is a derived from information collected by the U.S. Census Service concerning housing in the area of Boston MA. The following describes the dataset columns:

CRIM - per capita crime rate by town
ZN - proportion of residential land zoned for lots over 25,000 sq.ft.
INDUS - proportion of non-retail business acres per town.
CHAS - Charles River dummy variable (1 if tract bounds river; 0 otherwise)
NOX - nitric oxides concentration (parts per 10 million)
RM - average number of rooms per dwelling
AGE - proportion of owner-occupied units built prior to 1940
DIS - weighted distances to five Boston employment centres
RAD - index of accessibility to radial highways
TAX - full-value property-tax rate per $10,000
PTRATIO - pupil-teacher ratio by town
B - 1000(Bk - 0.63)^2 where Bk is the proportion of Black individuals by town
LSTAT - % lower status of the population
MEDV - Median value of owner-occupied homes in $1000's



### 1. Load the data.

```{r load-data}


dat <- read_csv("data/bostonhousing.csv")
dat
```

### 2. Read the codebook. Your task today is to answer the question, is crime associated with the value of homes? State your null hypothesis and alternative hypothesis.
```{r}

```

Answer: 

### 3. Do EDA for crim and medv. 

```{r}

```

Answer: 

### 4. For crim, what transformation makes the distribution more symmetric and spread out? 

```{r}

```

Answer: 

### 5. For medv, filter to keep only the cases for which medv (the Median value of owner-occupied homes) is less than 50. The dataset was truncated at medv>=50, so we'll just keep anything below it since the distribution is artificially truncated. Make a new dataset called data.edited that only keeps the cases for which medv<50.
```{r}
dat %>% ggplot(aes(x=crim)) + geom_histogram()

dat %>% ggplot(aes(x=log(crim))) + geom_histogram()

dat %>% filter(medv<50) %>% ggplot(aes(x=medv)) + geom_histogram()

dat %>% filter(medv<50) %>% ggplot(aes(x=log(crim), y=medv)) + geom_point()

dat.edited <- dat %>% filter(medv<50)

```

Answer: 

### 6. Fit a linear regression model on crim and medv called out, using the dat.edited dataset. Using a Box-Cox transformation, find out which transformation would help make the linear model fit better.

```{r}
out <- lm(crim ~ medv, data=dat.edited)
plot(out)

library(MASS)
boxcox(out)

```

Answer: 

### 7. Fit a linear model on the transformed variable(s) called out.transformed. Do the diagnostics look better? In your opinion, which assumptions are satisfied and which are not? 

```{r}
out.transformed <- lm(log(crim) ~ medv, data=dat.edited)
plot(out.transformed)

```

Answer: 



### 8. In the diagnostic plots can you see any outliers? If so, draw a scatterplot that shows these outliers. Describe where they are in the scatterplot. 

```{r}
dat.edited %>% mutate(highlight = ifelse(row_number() %in% c(221, 226, 254, 392, 394), "highlight", "normal")) %>%
  ggplot(aes(x=log(crim), y=medv)) + geom_point(aes(colour = highlight))

```

Answer: 


### 9. Are these outliers problematic? What would you do with these outliers in fitting your model? 

Answer: I would do nothing with the outliers because they are not very influential. 

### 10. Is crime associated with the value of homes? If so, by how much? Note: Fill in the blanks.

```{r}

```

Answer: A decrease in median home value by $1000 is associated with an 16% decrease in crime rate, and this is statistically significantly different from zero at the 0.05 level. 




